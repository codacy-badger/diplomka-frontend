<div class="row">
  <div class="col">
    <form [formGroup]="form">

      <!-- Generická hlavička společná pro všechny experimenty -->
      <app-experiment-type-header [form]="form"></app-experiment-type-header>


      <div class="row experiment-property">
        <div class="col-10">
          <h4>C-VEP parametry</h4>
        </div>
        <div class="col-2 text-right" appContentToggler [toggledContent]="cvepParams" [icon]="cvepParamsIcon"><i class="fas fa-minus" #cvepParamsIcon></i></div>

        <div class="col-12" #cvepParams>
          <div class="row">

            <div class="col-12">
              <div class="form-group" style="padding-bottom: 5px">
                <label for="cvep-output-count">output count</label>
                <ng5-slider id="cvep-output-count" formControlName="outputCount" [options]="outputCountParams"></ng5-slider>
              </div>
            </div>

            <div class="col-12 col-sm-6 col-md-3">
              <div class="form-group">
                <label for="cvep-out">out [ms]</label>
                <input type="number" id="cvep-out" class="form-control form-control-sm" [class.is-valid]="out.valid" [class.is-invalid]="out.invalid" formControlName="out">
                <small *ngIf="out.touched && out.errors?.required" class="form-text text-muted">Parametr out je vyžadován.</small>
                <small *ngIf="out.touched && out.errors?.min" class="form-text text-muted">Minimální hodnota je: {{out.errors?.min.min}}.</small>
                <small *ngIf="out.touched && out.errors?.max" class="form-text text-muted">Maximální hodnota je: {{out.errors?.max.max}}.</small>
              </div>
            </div>

            <div class="col-12 col-sm-6 col-md-3">
              <div class="form-group">
                <label for="cvep-wait">wait [ms]</label>
                <input type="number" id="cvep-wait" class="form-control form-control-sm" [class.is-valid]="wait.valid" [class.is-invalid]="wait.invalid" formControlName="wait">
                <small *ngIf="wait.touched && wait.errors?.required" class="form-text text-muted">Parametr wait je vyžadován.</small>
                <small *ngIf="wait.touched && wait.errors?.min" class="form-text text-muted">Minimální hodnota je: {{wait.errors?.min.min}}.</small>
                <small *ngIf="wait.touched && wait.errors?.max" class="form-text text-muted">Maximální hodnota je: {{wait.errors?.max.max}}.</small>
              </div>
            </div>

            <div class="col-12 col-sm-6 col-md-3">
              <div class="form-group">
                <label for="cvep-bit-shift">bit shift</label>
                <ng5-slider id="cvep-bit-shift" formControlName="bitShift" [options]="bitShiftSliderOptions"></ng5-slider>
                <small *ngIf="bitShift.touched && bitShift.errors?.required" class="form-text text-muted">Hodnota nesmí být prázdná!</small>
              </div>
            </div>

            <div class="col-12 col-sm-6 col-md-3">
              <div class="form-group">
                <label for="cvep-brightness">brightness [%]</label>
                <ng5-slider id="cvep-brightness" formControlName="brightness" [options]="brightnessSliderOptions"></ng5-slider>
                <small *ngIf="brightness.touched && brightness.errors?.required" class="form-text text-muted">Hodnota nesmí být prázdná!</small>
                <small *ngIf="brightness.touched && brightness.errors?.min" class="form-text text-muted">Minimální hodnota je: {{brightness.errors?.min.min}}.</small>
                <small *ngIf="brightness.touched && brightness.errors?.max" class="form-text text-muted">Maximální hodnota je: {{brightness.errors?.max.max}}.</small>
              </div>
            </div>

          </div>
        </div>

      </div>

      <div class="row experiment-property">
        <div class="col-10">
          <h4>Typ výstupu</h4>
        </div>
        <div class="col-2 text-right" appContentToggler [toggledContent]="cvepOutputsType" [icon]="cvepOutputsTypeIcon"><i class="fas fa-minus" #cvepOutputsTypeIcon></i></div>

        <div class="col-12" #cvepOutputsType>
          <app-output-type [form]="usedOutputs"></app-output-type>
        </div>
      </div>

      <div class="row experiment-property">
        <div class="col-10">
          <h4>Pattern</h4>
        </div>
        <div class="col-2 text-right" appContentToggler [toggledContent]="pattern" [icon]="patternIcon"><i class="fas fa-minus" #patternIcon></i></div>

        <div class="col-12" #pattern>
          <app-output-pattern formControlName="pattern"></app-output-pattern>
        </div>
      </div>
    </form>

  </div>
</div>

<app-fab [icon]="(working | async) ? 'fa-save fa-spin' : 'fa-save'" (fabClick)="handleSaveExperiment()" [disabled]="form.invalid || (working | async)"></app-fab>
