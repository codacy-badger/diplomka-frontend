<div class="row">
  <div class="col">
    <form [formGroup]="form">

      <!-- Generická hlaviška společná pro všechny experimenty -->
      <app-experiment-type-header [form]="form"></app-experiment-type-header>

      <div class="row experiment-property">
        <div class="col-12">
          <h4>ERP parametry</h4>
        </div>
        <div class="col-12">
          <div class="form-group" style="padding-bottom: 5px">
            <label for="erp-output-count">output count</label>
            <ng5-slider id="erp-output-count" formControlName="outputCount" [options]="outputCountParams"></ng5-slider>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-md-3">
          <div class="form-group">
            <label for="erp-out">out [ms]</label>
            <input type="number" id="erp-out" class="form-control form-control-sm" [class.is-valid]="out.valid" [class.is-invalid]="out.invalid" formControlName="out">
            <small *ngIf="out.touched && out.errors?.required" class="form-text text-muted">Parametr out je vyžadován.</small>
            <small *ngIf="out.touched && out.errors?.min" class="form-text text-muted">Minimální hodnota je: {{out.errors?.min.min}}.</small>
            <small *ngIf="out.touched && out.errors?.max" class="form-text text-muted">Maximální hodnota je: {{out.errors?.max.max}}.</small>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-md-3">
          <div class="form-group">
            <label for="erp-wait">wait [ms]</label>
            <input type="number" id="erp-wait" class="form-control form-control-sm" [class.is-valid]="wait.valid" [class.is-invalid]="wait.invalid" formControlName="wait">
            <small *ngIf="wait.touched && wait.errors?.required" class="form-text text-muted">Parametr wait je vyžadován.</small>
            <small *ngIf="wait.touched && wait.errors?.min" class="form-text text-muted">Minimální hodnota je: {{wait.errors?.min.min}}.</small>
            <small *ngIf="wait.touched && wait.errors?.max" class="form-text text-muted">Maximální hodnota je: {{wait.errors?.max.max}}.</small>
          </div>
        </div>

        <div class="col-12 col-sm-6 col-md-3">
          <div class="form-group">
            <label for="erp-random">random</label>
            <select name="erp-random" id="erp-random" class="custom-select" formControlName="random">
              <option *ngFor="let random of randoms" [value]="random.id">{{random.name}}</option>
            </select>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-md-3">
          <div class="form-group">
            <label for="erp-edge">edge</label>
            <select name="erp-edge" id="erp-edge" class="custom-select" formControlName="edge">
              <option *ngFor="let edge of edges" [value]="edge.id">{{edge.name}}</option>
            </select>
          </div>
        </div>

      </div>

      <app-experiment-type-erp-output [form]="form" [count]="outputCount.value"></app-experiment-type-erp-output>

    </form>
  </div>
</div>

<app-fab icon="fa-save" (fabClick)="handleSaveExperiment()" [disabled]="form.invalid || (working | async)"></app-fab>
